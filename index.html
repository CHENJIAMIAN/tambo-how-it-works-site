<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tambo 组件交互用例展厅</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=IBM+Plex+Mono:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg:#0b0f18;--panel:#121a2acc;--line:#263247;--text:#ebf1ff;--muted:#9eb0d0;
      --c1:#58f0ff;--c2:#8e7dff;--ok:#7dff9a;--warn:#ffd36a;
    }
    *{box-sizing:border-box} body{margin:0;font-family:Outfit,sans-serif;color:var(--text);
      background:radial-gradient(1200px 700px at 90% -20%,#2f1f5e 0,transparent 60%),radial-gradient(1000px 700px at -10% 20%,#134f63 0,transparent 60%),var(--bg)}
    .wrap{width:min(1180px,94vw);margin:auto;padding:30px 0 60px}
    .tag{display:inline-block;padding:6px 12px;border:1px solid #33445f;border-radius:99px;font:600 12px 'IBM Plex Mono',monospace;color:var(--muted)}
    h1{font-size:clamp(28px,5vw,52px);margin:12px 0 8px;line-height:1.05}
    .grad{background:linear-gradient(95deg,var(--c1),#9fb4ff 40%,var(--c2));-webkit-background-clip:text;background-clip:text;color:transparent}
    .sub{color:var(--muted);font-size:18px;margin:0 0 20px}
    .grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:16px}
    .card{background:var(--panel);border:1px solid var(--line);border-radius:16px;padding:16px;backdrop-filter:blur(8px)}
    .k{font:600 12px 'IBM Plex Mono',monospace;color:#8ea2c8}
    .ttl{margin:8px 0 4px;font-size:24px}
    .desc{margin:0 0 14px;color:#b7c8ea}
    .row{display:flex;gap:8px;flex-wrap:wrap}
    button,input,select,textarea{font:inherit}
    button{border:1px solid #3a4d6d;background:#1b263a;color:#e7efff;border-radius:10px;padding:8px 12px;cursor:pointer}
    button:hover{filter:brightness(1.1)}
    .btn-main{background:linear-gradient(90deg,var(--ok),var(--c1));color:#0b1a20;border:none;font-weight:700}
    .panel{border:1px solid #2d3a52;border-radius:12px;padding:12px;margin-top:10px;background:#0d1423}

    /* chart */
    .bars{display:flex;align-items:flex-end;height:160px;gap:8px;padding:8px;border-bottom:1px dashed #334b6f}
    .bar{flex:1;background:linear-gradient(180deg,#8f7dff,#49e8ff);border-radius:8px 8px 3px 3px;min-height:8px;position:relative;transition:all .25s}
    .bar span{position:absolute;top:-22px;left:50%;transform:translateX(-50%);font:11px 'IBM Plex Mono';color:#b7c9ef}

    /* task board */
    .tasks{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .col{background:#0d1525;border:1px solid #2d405b;border-radius:10px;padding:10px}
    .col h4{margin:0 0 8px;font-size:14px;color:#b9cdf3}
    .pill{padding:7px 9px;margin:6px 0;border-radius:9px;background:#192740;border:1px solid #2e4261;font-size:14px;display:flex;justify-content:space-between;align-items:center}

    /* note */
    .note{padding:12px;border-radius:12px;min-height:130px;color:#0c1322}
    .note.yellow{background:#ffe38a}.note.blue{background:#98d8ff}.note.green{background:#9bf3b3}.note.white{background:#f0f4ff}

    /* tool console */
    .console{font:13px 'IBM Plex Mono',monospace;white-space:pre-wrap;max-height:180px;overflow:auto;background:#0a121f;border:1px solid #2c3d57;padding:10px;border-radius:10px;color:#cfe0ff}
    .ok{color:#8bffae}.warn{color:#ffd36a}
    footer{margin-top:18px;color:#8ea2c9;font-size:14px}
    @media(max-width:900px){.grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="wrap">
    <span class="tag">TAMBO · REAL INTERACTIVE EXAMPLES</span>
    <h1>每个组件分别能达到什么效果：<span class="grad">直接上可交互用例</span></h1>
    <p class="sub">下面 4 块分别对应 Tambo 常见组件能力：图表生成、可持续更新任务板、可编辑便签、工具调用反馈。</p>

    <section class="grid">
      <article class="card">
        <div class="k">COMPONENT 01 · Graph</div>
        <h3 class="ttl">数据图表组件（可切换类型）</h3>
        <p class="desc">模拟 Agent 返回 props 后，组件渲染不同视图。这里用同一份数据切换展示方式。</p>
        <div class="row">
          <button onclick="setChart('sales')">销售额</button>
          <button onclick="setChart('users')">用户数</button>
          <button onclick="randomize()">随机重算</button>
        </div>
        <div class="panel">
          <div class="bars" id="bars"></div>
        </div>
      </article>

      <article class="card">
        <div class="k">COMPONENT 02 · TaskBoard (Interactable)</div>
        <h3 class="ttl">任务看板（可持续交互）</h3>
        <p class="desc">模拟用户继续提需求时，组件不是重建，而是持续更新状态。</p>
        <div class="row">
          <input id="taskInput" placeholder="新增任务，例如：整理竞品页面" style="flex:1;min-width:220px;background:#0d1525;border:1px solid #30445f;color:#dce8ff;border-radius:10px;padding:9px"/>
          <button class="btn-main" onclick="addTask()">添加</button>
        </div>
        <div class="panel tasks">
          <div class="col"><h4>待办</h4><div id="todo"></div></div>
          <div class="col"><h4>已完成</h4><div id="done"></div></div>
        </div>
      </article>

      <article class="card">
        <div class="k">COMPONENT 03 · Note (Interactable)</div>
        <h3 class="ttl">便签组件（可编辑 + 可改主题）</h3>
        <p class="desc">对应 withInteractable(Note) 场景：标题/内容/颜色都可由 Agent 或用户更新。</p>
        <div class="row">
          <input id="noteTitle" value="产品改版备忘" style="background:#0d1525;border:1px solid #30445f;color:#dce8ff;border-radius:10px;padding:9px"/>
          <select id="noteColor" onchange="renderNote()" style="background:#0d1525;border:1px solid #30445f;color:#dce8ff;border-radius:10px;padding:9px">
            <option value="yellow">yellow</option><option value="blue">blue</option><option value="green">green</option><option value="white">white</option>
          </select>
        </div>
        <textarea id="noteBody" oninput="renderNote()" style="width:100%;margin-top:8px;background:#0d1525;border:1px solid #30445f;color:#dce8ff;border-radius:10px;padding:9px;min-height:74px">1) 首屏文案更聚焦结果
2) CTA 按钮改成“立即试用”
3) 补一个真实案例模块</textarea>
        <div class="panel"><div id="notePreview" class="note yellow"></div></div>
      </article>

      <article class="card">
        <div class="k">COMPONENT 04 · Tool Result Panel</div>
        <h3 class="ttl">工具调用结果组件（真实反馈流）</h3>
        <p class="desc">模拟 local tools / MCP 调用后，界面即时显示执行状态和结果。</p>
        <div class="row">
          <button onclick="runTool('weather')">调用 getWeather</button>
          <button onclick="runTool('crm')">调用 listLeads</button>
          <button onclick="runTool('publish')">调用 publishDraft</button>
        </div>
        <div class="panel">
          <div id="console" class="console">等待调用...</div>
        </div>
      </article>
    </section>

    <footer>
      说明：这是“组件效果演示版”，用于直观看每个组件的交互能力。若你要，我下一步可以直接改成真正接 Tambo SDK 的可运行项目结构（含 Provider、ThreadInput、真实 tool 注册）。
    </footer>
  </div>

<script>
  const state = {
    chart: {
      sales: [120, 180, 90, 210, 160, 240],
      users: [22, 40, 28, 53, 47, 61],
      mode: 'sales'
    },
    tasks: [
      { id: 1, text: '梳理需求边界', done: false },
      { id: 2, text: '产出首版交互稿', done: false },
      { id: 3, text: '完成评审并修订', done: true }
    ]
  };

  function renderChart(){
    const data = state.chart[state.chart.mode];
    const bars = document.getElementById('bars');
    const max = Math.max(...data);
    bars.innerHTML = data.map((v,i)=>`<div class="bar" style="height:${(v/max)*140+12}px"><span>${v}</span></div>`).join('');
  }
  function setChart(mode){ state.chart.mode = mode; renderChart(); }
  function randomize(){
    state.chart[state.chart.mode] = state.chart[state.chart.mode].map(()=>Math.floor(Math.random()*220)+20);
    renderChart();
  }

  function renderTasks(){
    const todo = document.getElementById('todo');
    const done = document.getElementById('done');
    const t = state.tasks.filter(x=>!x.done).map(x=>`<div class='pill'>${x.text}<button onclick='toggleTask(${x.id})'>完成</button></div>`).join('');
    const d = state.tasks.filter(x=>x.done).map(x=>`<div class='pill'>${x.text}<button onclick='toggleTask(${x.id})'>撤回</button></div>`).join('');
    todo.innerHTML = t || '<div style="color:#7f93b8">暂无</div>';
    done.innerHTML = d || '<div style="color:#7f93b8">暂无</div>';
  }
  function addTask(){
    const el = document.getElementById('taskInput');
    const text = el.value.trim();
    if(!text) return;
    state.tasks.unshift({ id: Date.now(), text, done:false });
    el.value=''; renderTasks();
  }
  function toggleTask(id){
    const t = state.tasks.find(x=>x.id===id); if(!t) return; t.done=!t.done; renderTasks();
  }

  function renderNote(){
    const title = document.getElementById('noteTitle').value;
    const body = document.getElementById('noteBody').value;
    const color = document.getElementById('noteColor').value;
    const box = document.getElementById('notePreview');
    box.className = 'note ' + color;
    box.innerHTML = `<strong>${title}</strong><div style='margin-top:8px;white-space:pre-wrap'>${body}</div>`;
  }

  async function runTool(type){
    const c = document.getElementById('console');
    const now = new Date().toLocaleTimeString();
    c.innerHTML = `[${now}] 调用 ${type}...\n`;
    await new Promise(r=>setTimeout(r, 600));

    if(type==='weather'){
      c.innerHTML += `<span class='ok'>✓ getWeather 成功</span>\n返回：上海 27°C，东南风 3 级，建议：可外出。`;
    } else if(type==='crm'){
      c.innerHTML += `<span class='ok'>✓ listLeads 成功</span>\n返回：本周新增线索 14 条，待跟进 5 条（高优先级 2 条）。`;
    } else {
      c.innerHTML += `<span class='warn'>! publishDraft 需要二次确认</span>\n状态：草稿已校验通过，等待用户确认发布。`;
    }
  }

  renderChart();
  renderTasks();
  renderNote();
</script>
</body>
</html>